!function(e){e(document).ready(function(){const a=e(".dreamtonics"),l=a.filter(".widget"),t=a.find(".player");let r,d=0,p=0,i=0,n=0;const o=()=>{return widgetMedia+r.id+"_"+r.tracks[d].id+"_"+r["vocal-modes"][p]+".ogg"},_=()=>{t.jPlayer("setMedia",{mp3:o()}).jPlayer("play"),a.find(".player__trackname").text(r.tracks[d].title),e(".player__select_combo li").removeClass("selected"),e(".player__select_combo li:nth-child("+(d+1)+")").addClass("selected")},s=()=>{t.jPlayer("setMedia",{mp3:o()}).jPlayer("play",i),a.find(".player__mode_name").text(r["vocal-modes"][p])};t.jPlayer({ready:function(){l.data("track")?((n,_)=>{!a.hasClass("loading")&&a.addClass("loading"),n&&!n.hasClass("loading")&&n.addClass("loading");e.getJSON(widgetDb,function(s){if(s=s.voices,d=0,p=0,i=0,r=s.map(e=>e.id==_&&e).filter(e=>0!==Object.keys(e).length)[0]){let i=r.tracks;if(null!=i){a.find(".player__next, .player__prev, .player__mode_next, .player__mode_prev").prop("disabled",!1),$text=!1,e.each(r.text,function(e,a){$text=a.locale==widgetLocale?a:$text}),a.find(".player__ai_title").text($text.name),a.find(".player__ai_caption").text($text.copyright),a.find(".player__trackname").text(i[d].title);let _=r["vocal-modes"];a.find(".player__mode_name").text(_[p]),t.jPlayer("setMedia",{mp3:o()}),1==i.length?a.find(".player__next, .player__prev").prop("disabled",!0):a.find(".player__prev").prop("disabled",!0),1==_.length?a.find(".player__mode_next, .player__mode_prev").prop("disabled",!0):a.find(".player__mode_prev").prop("disabled",!0),a.hasClass("widget")&&!l.hasClass("active")&&l.addClass("active"),n&&n.removeClass("loading"),a.removeClass("loading")}}else console.log("ID not found in database")})})(null,l.data("track")):console.log("No id is set")},timeupdate:function(e){0!=parseInt(e.jPlayer.status.currentTime)&&(i=e.jPlayer.status.currentTime)},play:function(e){n=!0},pause:function(e){n=!1},ended:function(e){n=!1},swfPath:"/",solution:"html",cssSelectorAncestor:".dreamtonics",supplied:"mp3,oga",wmode:"window",cssSelector:{play:".player__play",pause:".player__pause",stop:".player__stop",seekBar:".player__seek-bar",playBar:".player__play-bar",mute:".player__mute",unmute:".player__unmute",volumeBar:".player__volume-bar",volumeBarValue:".player__volume-bar-value",volumeMax:".player__volume-max",playbackRateBar:".player__playback-rate-bar",playbackRateBarValue:".player__playback-rate-bar-value",currentTime:".player__current-time",duration:".player__duration",title:".player__title"}}),a.on("click",".player__next:not(:disabled)",function(l){++d>0&&a.find(".player__prev").prop("disabled",!1),d+1>=r.tracks.length&&e(this).prop("disabled",!0),_(),l.preventDefault()}),a.on("click",".player__prev:not(:disabled)",function(l){--d>=0&&a.find(".player__next").prop("disabled",!1),0==d&&e(this).prop("disabled",!0),_(),l.preventDefault()}),a.on("click",".player__mode_next:not(:disabled)",function(l){++p>0&&a.find(".player__mode_prev").prop("disabled",!1),p+1>=r["vocal-modes"].length&&e(this).prop("disabled",!0),s(),l.preventDefault()}),a.on("click",".player__mode_prev:not(:disabled)",function(l){--p>=0&&a.find(".player__mode_next").prop("disabled",!1),0==p&&e(this).prop("disabled",!0),s(),l.preventDefault()})})}(jQuery);